<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API í…ŒìŠ¤íŠ¸ - AI ê°ì„±ë¶„ì„</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .container { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .section { border: 1px solid #ddd; padding: 20px; border-radius: 8px; }
        textarea { width: 100%; padding: 10px; border-radius: 4px; border: 1px solid #ddd; }
        button { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #0056b3; }
        .result { margin-top: 15px; padding: 15px; background: #f8f9fa; border-radius: 4px; }
        .error { background: #f8d7da; color: #721c24; }
        .success { background: #d4edda; color: #155724; }
        h2 { margin-top: 0; color: #333; }
        pre { background: #f4f4f4; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ğŸ¤– AI ê°ì„±ë¶„ì„ API í…ŒìŠ¤íŠ¸</h1>
    
    <div class="container">
        <!-- ì›¹ ì¸í„°í˜ì´ìŠ¤ í…ŒìŠ¤íŠ¸ -->
        <div class="section">
            <h2>ğŸŒ ì›¹ ì¸í„°í˜ì´ìŠ¤ (HTML)</h2>
            <p>ê¸°ì¡´ ì›¹ ë¸Œë¼ìš°ì €ìš© ì¸í„°í˜ì´ìŠ¤</p>
            <button onclick="window.open('http://127.0.0.1:8000/', '_blank')">
                ì›¹ ì¸í„°í˜ì´ìŠ¤ ì—´ê¸°
            </button>
        </div>

        <!-- API í…ŒìŠ¤íŠ¸ -->
        <div class="section">
            <h2>ğŸ”Œ REST API í…ŒìŠ¤íŠ¸</h2>
            <p>í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ìš© JSON API</p>
            <textarea id="apiText" rows="3" placeholder="ë¶„ì„í•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">ì´ ì˜í™” ì •ë§ ê°ë™ì ì´ê³  ì¬ë¯¸ìˆì—ˆì–´ìš”!</textarea>
            <br><br>
            <button onclick="testAPI()">API í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
            
            <div id="apiResult" class="result" style="display:none;"></div>
        </div>
    </div>

    <!-- JavaScript/React ì—°ë™ ì˜ˆì‹œ -->
    <div class="section" style="margin-top: 30px;">
        <h2>ğŸ’» í”„ë¡ íŠ¸ì—”ë“œ ì—°ë™ ì½”ë“œ ì˜ˆì‹œ</h2>
        
        <h3>JavaScript (Vanilla)</h3>
        <pre><code>const analyzeSentiment = async (text) => {
  try {
    const response = await fetch('http://127.0.0.1:8000/api/analyze/', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ text: text })
    });
    
    const data = await response.json();
    return data;
  } catch (error) {
    console.error('Error:', error);
  }
};

// ì‚¬ìš©ë²•
analyzeSentiment("ì´ ì œí’ˆ ì •ë§ ì¢‹ì•„ìš”!")
  .then(result => console.log(result));</code></pre>

        <h3>React.js Hook ì˜ˆì‹œ</h3>
        <pre><code>import { useState } from 'react';

const useSentimentAnalysis = () => {
  const [result, setResult] = useState(null);
  const [loading, setLoading] = useState(false);

  const analyze = async (text) => {
    setLoading(true);
    try {
      const response = await fetch('http://127.0.0.1:8000/api/analyze/', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ text })
      });
      
      const data = await response.json();
      setResult(data);
    } catch (error) {
      console.error('Error:', error);
    }
    setLoading(false);
  };

  return { result, loading, analyze };
};</code></pre>
    </div>

    <script>
        async function testAPI() {
            const text = document.getElementById('apiText').value;
            const resultDiv = document.getElementById('apiResult');
            
            if (!text.trim()) {
                resultDiv.innerHTML = '<div class="error">í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!</div>';
                resultDiv.style.display = 'block';
                return;
            }

            resultDiv.innerHTML = '<div>ë¶„ì„ ì¤‘...</div>';
            resultDiv.style.display = 'block';

            try {
                const response = await fetch('http://127.0.0.1:8000/api/analyze/', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ text: text })
                });

                const data = await response.json();

                if (data.success) {
                    resultDiv.innerHTML = `
                        <div class="success">
                            <h3>âœ… ë¶„ì„ ì„±ê³µ!</h3>
                            <p><strong>ì…ë ¥ í…ìŠ¤íŠ¸:</strong> ${data.text}</p>
                            <p><strong>ê°ì •:</strong> ${data.result.korean_label}</p>
                            <p><strong>ì˜ì–´ ë¼ë²¨:</strong> ${data.result.label}</p>
                            <p><strong>ì‹ ë¢°ë„:</strong> ${data.result.confidence_percent}%</p>
                            
                            <h4>ğŸ“‹ ì „ì²´ ì‘ë‹µ (JSON)</h4>
                            <pre>${JSON.stringify(data, null, 2)}</pre>
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = `<div class="error">âŒ ì˜¤ë¥˜: ${data.error}</div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ${error.message}</div>`;
            }
        }
    </script>
</body>
</html>
